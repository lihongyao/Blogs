# å‰è¨€

åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒåŒ…ç®¡ç†å·¥å…·æ˜¯ç®¡ç†å’Œç»„ç»‡é¡¹ç›®ä¾èµ–çš„é‡è¦å·¥å…·ï¼Œå®ƒä»¬èƒ½å¤Ÿç®€åŒ–ä¾èµ–çš„å®‰è£…ã€æ›´æ–°å’Œåˆ é™¤ï¼ŒåŒæ—¶è§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

ä»¥ä¸‹æ˜¯ä¸‰ç§å¸¸ç”¨çš„å‰ç«¯åŒ…ç®¡ç†å·¥å…·çš„è¯¦ç»†å¯¹æ¯”ï¼š

## ğŸ“– npmï¼ˆNode Package Managerï¼‰

npm æ˜¯ Node.js çš„é»˜è®¤åŒ…ç®¡ç†å™¨ï¼Œæ‹¥æœ‰åºå¤§çš„ç”Ÿæ€ç³»ç»Ÿå’Œå¹¿æ³›çš„ç¤¾åŒºæ”¯æŒ

ç‰¹ç‚¹ï¼š

- ä½¿ç”¨ package.json æ–‡ä»¶ç®¡ç†ä¾èµ–å…³ç³»å’Œè„šæœ¬ã€‚
- æä¾›è‡ªåŠ¨ä¾èµ–è§£æå’Œç‰ˆæœ¬é”å®šï¼ˆé€šè¿‡ package-lock.json æ–‡ä»¶ï¼‰ã€‚
- æ”¯æŒä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·å’Œè„šæœ¬ç®¡ç†

ä¼˜ç‚¹ï¼š

- å®˜æ–¹æ”¯æŒï¼Œç¤¾åŒºåºå¤§ï¼ŒåŒ…èµ„æºä¸°å¯Œã€‚
- ç®€å•æ˜“ç”¨ï¼Œé€‚åˆåˆå­¦è€…å’Œå°å‹é¡¹ç›®ã€‚

ç¼ºç‚¹ï¼š

- å®‰è£…é€Ÿåº¦è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡ä¾èµ–æ—¶ã€‚
- ç£ç›˜ç©ºé—´å ç”¨è¾ƒå¤§ï¼Œæ¯ä¸ªé¡¹ç›®ç”Ÿæˆç‹¬ç«‹çš„ node_modules æ–‡ä»¶å¤¹ã€‚

## ğŸ“– Yarn

Yarn ç”± Facebook å¼€å‘ï¼Œæ—¨åœ¨è§£å†³ npm çš„æ€§èƒ½å’Œä¸€è‡´æ€§é—®é¢˜ã€‚

ç‰¹ç‚¹ï¼š

- æ”¯æŒå¹¶è¡Œä¸‹è½½å’Œç¦»çº¿å®‰è£…ï¼Œæå‡å®‰è£…é€Ÿåº¦ã€‚
- ä½¿ç”¨ yarn.lock æ–‡ä»¶ç¡®ä¿ä¾èµ–ç‰ˆæœ¬çš„ä¸€è‡´æ€§ã€‚
- æä¾›å·¥ä½œåŒºï¼ˆWorkspacesï¼‰åŠŸèƒ½ï¼Œæ”¯æŒ Monorepo é¡¹ç›®ã€‚

ä¼˜ç‚¹ï¼š

- å®‰è£…é€Ÿåº¦å¿«ï¼Œä¾èµ–ç®¡ç†æ›´é«˜æ•ˆã€‚
- ç¡®å®šæ€§å®‰è£…ï¼Œé€‚åˆå›¢é˜Ÿåä½œå’Œå¤§å‹é¡¹ç›®ã€‚

ç¼ºç‚¹ï¼š

- å­¦ä¹ æ›²çº¿ç¨é«˜ï¼Œéƒ¨åˆ†é«˜çº§åŠŸèƒ½å¯¹æ–°æ‰‹è¾ƒå¤æ‚ã€‚
- ç”Ÿæ€ç³»ç»Ÿè™½æ´»è·ƒï¼Œä½†ä¸å¦‚ npm åºå¤§ã€‚

## ğŸ“– pnpm

pnpm é€šè¿‡ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥å…±äº«ä¾èµ–ï¼Œæ—¨åœ¨è§£å†³ npm å’Œ Yarn çš„ç£ç›˜ç©ºé—´å’Œå®‰è£…é€Ÿåº¦é—®é¢˜

ç‰¹ç‚¹ï¼š

- ä½¿ç”¨å…¨å±€å­˜å‚¨åŒºå…±äº«ä¾èµ–ï¼Œå‡å°‘ç£ç›˜ç©ºé—´å ç”¨ã€‚

- æ”¯æŒå¹¶è¡Œå®‰è£…å’Œä¸¥æ ¼ä¾èµ–ç®¡ç†ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚
- æä¾›é«˜æ•ˆçš„æ–‡ä»¶é“¾æ¥æœºåˆ¶ï¼Œæå‡å®‰è£…é€Ÿåº¦ã€‚

ä¼˜ç‚¹ï¼š

- ç£ç›˜ç©ºé—´å ç”¨æœ€å°ï¼Œå®‰è£…é€Ÿåº¦æœ€å¿«ã€‚
- ä¾èµ–ç®¡ç†ä¸¥æ ¼ï¼Œé€‚åˆå¤§å‹é¡¹ç›®å’Œ Monorepoã€‚

ç¼ºç‚¹ï¼š

- ç”Ÿæ€ç³»ç»Ÿç›¸å¯¹è¾ƒå°ï¼Œéƒ¨åˆ†å·¥å…·é“¾å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚
- å­¦ä¹ æ›²çº¿è¾ƒé«˜ï¼Œéœ€è¦é€‚åº”å…¶ç‹¬ç‰¹çš„ä¾èµ–ç®¡ç†æœºåˆ¶ã€‚

# [npm](https://www.npmjs.cn/)

## æ¦‚è¿°

npmï¼ˆ**N**ode **P**ackage **M**anagerï¼ŒNode åŒ…ç®¡ç†å™¨ï¼‰æ˜¯ Node.js çš„å®˜æ–¹åŒ…ç®¡ç†å·¥å…·ï¼Œéš Node.js ä¸€åŒå®‰è£…ã€‚å®ƒæä¾›äº†ä¾¿æ·çš„ä¾èµ–ç®¡ç†æœºåˆ¶ï¼Œèƒ½å¤Ÿé«˜æ•ˆè§£å†³ Node.js åº”ç”¨åœ¨ä»£ç å…±äº«ã€ç‰ˆæœ¬æ§åˆ¶å’Œä¾èµ–ç®¡ç†ç­‰æ–¹é¢çš„é—®é¢˜ã€‚

## å®‰è£…

æˆ‘ä»¬å·²ç»æåˆ°ï¼ŒnodeJS è‡ªå¸¦ npmï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å®‰è£… nodeJS å³å¯ã€‚

- æ–¹æ¡ˆ1ï¼šç‚¹å‡» [å‰å¾€ä¸‹è½½ nodeJS](https://nodejs.org/zh-cn/download/)
- æ–¹æ¡ˆ2ï¼šä½¿ç”¨ [nvm >>](https://github.com/nvm-sh/nvm/blob/master/README.md)ï¼ˆmacOSæ¨èï¼Œä¾¿äºç®¡ç†nodeç‰ˆæœ¬ï¼Œæ²™ç®±éš”ç¦»ï¼‰
  
  > æç¤ºï¼šå¦‚æœä½ æ˜¯ windowsï¼Œå¯ä»¥ä½¿ç”¨ nvm-windowsï¼Œå…·ä½“å®‰è£…æ–¹å¼å‚è€ƒ [è¿™é‡Œ >>](https://juejin.cn/post/7025619520140083236)ï¼Œæˆ–è€…ä¹‹å‰å‰å¾€ [nvm-windows](https://github.com/coreybutler/nvm-windows/releases) ä¸‹è½½å®‰è£…åŒ…ã€‚

### ğŸ“Œ å®˜ç½‘ä¸‹è½½

nodeJS ä¸‹è½½å®Œæˆååƒæ­£å¸¸è½¯ä»¶é‚£æ ·è¿›è¡Œå®‰è£…å³å¯ï¼Œä½†è·¯å¾„æœ€å¥½é€‰æ‹©ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æŸ¥æ‰¾çš„ï¼ˆç›˜ç¬¦çš„æ ¹ç›®å½•æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬ä»¥åå¯èƒ½ç»å¸¸éƒ½ä¼šä½¿ç”¨åˆ°nodeJSé‡Œé¢çš„npmã€‚

### ğŸ“Œ NVM ï¼ˆ*macOSæ¨èä½¿ç”¨*ï¼‰

[nvm](https://github.com/nvm-sh/nvm/blob/master/README.md) ï¼ˆNode Version Managerï¼‰æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† Node.js ç‰ˆæœ¬çš„å·¥å…·ï¼Œæ”¯æŒåœ¨åŒä¸€å°è®¾å¤‡ä¸Šå®‰è£…å’Œåˆ‡æ¢ä¸åŒçš„ Node.js ç‰ˆæœ¬ã€‚**macOS æ¨èä½¿ç”¨ nvm è¿›è¡Œ Node.js ç‰ˆæœ¬ç®¡ç†ã€‚**

#### **ğŸ”§ å®‰è£… NVM**

1. æ‰“å¼€ç»ˆç«¯ï¼šæ‚¨å¯ä»¥åœ¨ **å¯åŠ¨å°** â†’ **å…¶ä»–**  ä¸­æ‰¾åˆ° **ç»ˆç«¯** ï¼ˆ*å½“ç„¶ä¹Ÿå¯ä»¥åœ¨å¯åŠ¨å°ç›´æ¥æœç´¢ **ç»ˆç«¯** å³å¯*ï¼‰ã€‚

2. å®‰è£… nvmï¼š

   ```shell
   $ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.2/install.sh | bash
   ```

   æ‰§è¡Œä¸Šè¿°å‘½ä»¤å°†ä¸‹è½½å¹¶è¿è¡Œä¸€ä¸ªå®‰è£…è„šæœ¬ï¼Œè¯¥è„šæœ¬ä¼šå°† nvm ä»“åº“å…‹éš†åˆ° `~/.nvm` ç›®å½•ã€‚

3. é…ç½®ç¯å¢ƒå˜é‡ï¼š

   ```ini
   export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
   [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm
   ```

   å°†ä¸Šé¢çš„ä»£ç æ·»åŠ åˆ° *`~/.bash_profile`* ä¸­ã€‚

4. è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½¿é…ç½®æ–‡ä»¶ç«‹å³ç”Ÿæ•ˆï¼š

   ```shell
   $ source ~/.bash_profile
   ```

5. æ ¡éªŒ NVM æ˜¯å¦å®‰è£…æˆåŠŸ

   ```shell
   $ nvm --version
   0.40.2
   ```

   > æç¤ºï¼šå‡ºç°ç‰ˆæœ¬å·è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚

#### **ğŸš€ NVM å¸¸ç”¨å‘½ä»¤**

**ğŸ“Œ å®‰è£…ä¸ç®¡ç† Node.js ç‰ˆæœ¬**

```shell
nvm install <version>   # å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Node.js
nvm install node        # å®‰è£…æœ€æ–°ç¨³å®šç‰ˆçš„ Node.js
nvm install --lts       # å®‰è£…æœ€æ–° LTSï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰
nvm uninstall <version> # å¸è½½æŒ‡å®šç‰ˆæœ¬çš„ Node.js
```

**ğŸ“Œ åˆ‡æ¢ Node.js ç‰ˆæœ¬**

```shell
nvm use <version>   # åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬
nvm current         # æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬
nvm alias default <version>  # è®¾ç½®é»˜è®¤ç‰ˆæœ¬
```

**ğŸ“Œ æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬**

```shell
nvm ls             # æ˜¾ç¤ºæœ¬åœ°å·²å®‰è£…çš„æ‰€æœ‰ Node.js ç‰ˆæœ¬
nvm list           # åŒä¸Š
nvm ls-remote      # æŸ¥çœ‹è¿œç¨‹å¯ç”¨çš„æ‰€æœ‰ Node.js ç‰ˆæœ¬
```

**ğŸ“Œ å…¶ä»–å¸¸ç”¨å‘½ä»¤**

```shell
nvm alias <name> <version>  # ä¸ºæŸä¸ªç‰ˆæœ¬åˆ›å»ºåˆ«å
nvm --version               # æ˜¾ç¤º nvm ç‰ˆæœ¬
nvm --help                  # æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
```

#### **ğŸ’¡ å¸¸è§é—®é¢˜ & è§£å†³æ–¹æ¡ˆ**

**1ï¸âƒ£ ç»ˆç«¯é‡å¯å nvm å¤±æ•ˆï¼Ÿ**

**âœ… è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿ nvm çš„ç¯å¢ƒå˜é‡æ­£ç¡®åŠ è½½ï¼Œå¯ä»¥å°è¯•åœ¨ .bash_profile æˆ– .zshrc é‡Œæ‰‹åŠ¨æ·»åŠ ï¼š

```shell
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
```

ç„¶åè¿è¡Œï¼š

```shell
source ~/.zshrc  # æˆ– source ~/.bash_profile
```

**2ï¸âƒ£ nvm å‘½ä»¤æ‰¾ä¸åˆ°**

**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š

```shell
command -v nvm  # æ£€æŸ¥ nvm æ˜¯å¦å®‰è£…
```

å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜ nvm æœªæ­£ç¡®åŠ è½½ï¼Œå°è¯•é‡æ–°å®‰è£…æˆ–æ‰‹åŠ¨åŠ è½½ï¼š

```shell
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
```

**3ï¸âƒ£ nvm use \<version> åˆ‡æ¢å node -v ä»ç„¶æ˜¯æ—§ç‰ˆæœ¬**

**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š

```shell
nvm cache clear   # æ¸…é™¤ nvm ç¼“å­˜
nvm use <version> # é‡æ–°åˆ‡æ¢ Node.js ç‰ˆæœ¬
```

### ğŸ“Œ æ£€æŸ¥å®‰è£…

å…ˆçœ‹çœ‹ node è¢«å®‰è£…åˆ°å“ªäº†ï¼Œç„¶åç¡®è®¤ä¸‹ç‰ˆæœ¬ã€‚

```shell
$ which node
/usr/local/bin/node
$ node -v
v22.14.0
```

> æç¤ºï¼šwindow ä¸‹ä½¿ç”¨ `where` æŒ‡ä»¤æ›¿ä»£ `which` ã€‚

> æ³¨æ„ï¼šwindowsä¸‹å¦‚æœæç¤º 'node ä¸æ˜¯å†…éƒ¨æŒ‡ä»¤' ï¼Œåˆ™éœ€è¦å°† node çš„è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­å³å¯ã€‚

nodeJSå®‰è£…å®Œæˆä¹‹åæ£€æŸ¥npmæ˜¯å¦å¯ç”¨ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œå·¥å…·é‡Œé¢è¾“å…¥ï¼š

```shell
$ which npm
/usr/local/bin/npm
$ npm -v
10.9.2
```

å¦‚æœç»“æœæ˜¯ä¸€ä¸²æ•°å­—çš„ç‰ˆæœ¬å·ï¼Œé‚£è¯æ˜å®‰è£…æˆåŠŸï¼Œnpm å·²ç»å¯ç”¨ã€‚

**âš ï¸ ç‰¹åˆ«æç¤ºï¼š**

å¦‚æœä½ æ˜¯ä½¿ç”¨ nvm å®‰è£… nodeï¼Œåˆ™ node çš„å­˜å‚¨ç›®å½•ä½äº nvm å®‰è£…ç›®å½•ä¸­çš„ *`versions`* ç›®å½•ä¸‹ï¼Œå¦‚ï¼š

```shell
$ which node 
/Users/ç”¨æˆ·å/.nvm/versions/node/v14.16.0/bin/node
$ which npm
/Users/ç”¨æˆ·å/.nvm/versions/node/v14.16.0/bin/npm
```

å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ nvm ç®¡ç† nodeï¼Œå„ç‰ˆæœ¬æ—¶ç›¸äº’ç‹¬ç«‹çš„ã€‚

## ä¿®æ”¹é»˜è®¤å®‰è£…è·¯å¾„

> **æ¸©é¦¨æç¤º**ï¼šæ ¹æ®éœ€è¦æ›´æ”¹ï¼Œéå¿…éœ€â—ï¸

### windows

é€šè¿‡å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹npm é»˜è®¤çš„å®‰è£…ä½ç½®ï¼š

```shell
$ npm config get prefix
C:\Users\ç”¨æˆ·å\AppData\Roaming\npm
```

ä¿®æ”¹é»˜è®¤å®‰è£…è·¯å¾„çš„æ–¹å¼å¦‚ä¸‹ï¼š

**â‘ . é¦–å…ˆåˆ›å»ºç”¨äºæ”¾ç½®ä¾èµ–åŒ…çš„æ–‡ä»¶**

```shell
# å…¨å±€å®‰è£…ç¨‹åºåŒ…çš„ç›®å½•
E:\npm-global
# å…¨å±€ç¼“å­˜çš„ç›®å½•
E:\npm-global\cache
```

**â‘¡. æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œåˆ†åˆ«è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š**

```shell
$ npm config set prefix "E:\npm-global"
$ npm config set cache  "E:\npm-global\cache"
```

### macOS

**â‘ . æŸ¥çœ‹å½“å‰ npm å…¨å±€å®‰è£…ä½ç½®**

```shell
$ npm config get prefix
/usr/local
```

**â‘¡. åœ¨ç”¨æˆ·ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œå¹¶è®¾ç½®ä¸ºnpmå…¨å±€çš„prefix**

```shell
$ mkdir ~/.npm-global
$ npm config set prefix '~/.npm-global'
```

**â‘¢. ä¿®æ”¹ `~/.bash_profile` æ–‡ä»¶ï¼ˆå¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª)**

```shell
export NPM_GLOBAL=/Users/lihongyao/.npm-global/bin
export PATH=$PATH:$NPM_GLOBAL
```

**â‘£. æ›´æ–°shell**

```shell
$ source ~/.bash_profile
```

**â‘¤. æ£€æŸ¥ä¸€ä¸‹**

```shell
$ npm config get prefix
/Users/lihongyao/.npm-global
```

æ­¤åï¼Œä½¿ç”¨ `npm install -g` å®‰è£…çš„æ¨¡å—ä¼šè¢«å®‰è£…åˆ° `~/.npm-global` ä¸­ï¼ŒåŒ `usr/local` ä¸€æ ·ï¼Œ`~/.npm-global`ä¹Ÿä¼šåŒ…å« `bin` å’Œ `lib` ç›®å½•ï¼Œå…¶ä¸­ `lib` ç›®å½•ä¸­åŒ…å« `node_modules`ã€‚

**â‘¥. åœ¨æ–°ä½ç½®é‡æ–°å®‰è£… npm**

```shell
$ npm install npm@latest -g
```

å®‰è£…æˆåŠŸåä½ å¯ä»¥åˆ é™¤ `usr/local/lib/node_modules` å’Œ `usr/local/bin/npm` äº†ã€‚å¦‚æœä¸é‡æ–°å®‰è£… `npm`ï¼Œå°±å¿…é¡»ä¿ç•™ `user/local` ä¸‹é¢çš„åŒ…ï¼Œå½“ç„¶æ›´æ–°åè¿˜æ˜¯ä¼šå®‰è£…åˆ°æ–°ä½ç½®ã€‚

**â‘¦. æ£€æŸ¥ä¸€ä¸‹å·²å®‰è£…çš„å…¨å±€åŒ…**

```shell
$ npm list --depth=0 -g
```

## é…ç½®æ–‡ä»¶ package.json 

åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š

```shell
$ npm init
```

æ ¹æ®æç¤ºè¿›è¡Œé…ç½®ï¼Œæ¯æ­¥å®ŒæˆæŒ‰å›è½¦é”®ç¡®è®¤ã€‚

é€šå¸¸ç¬¬ä¸€ä¸ªå‡ºç°çš„é…ç½®é¡¹æ˜¯nameï¼Œè¡¨ç¤ºå½“å‰é¡¹ç›®çš„åç§°ï¼Œåç§°çš„è®¾ç½®æœ‰ä»¥ä¸‹äº”ä¸ªè¦æ±‚ï¼š

1. è‹±æ–‡å­—ç¬¦**å¿…é¡»æ˜¯**å…¨éƒ¨å°å†™çš„

2. åç§°é—´**ä¸èƒ½å‡ºç°**ç©ºæ ¼ï¼ˆå¦‚ï¼štest webpackï¼‰
3. åç§°**ä¸å¾—**è¿‡é•¿
4. **ä¸èƒ½**ä¸ºä¸­æ–‡
5. å¯ä»¥ä½¿ç”¨è¿æ¥çº¿ï¼ˆ-ï¼‰å’Œä¸‹åˆ’çº¿ï¼ˆ_ï¼‰

å¦åˆ™éƒ½ä¼šé”™è¯¯å¹¶è¦æ±‚é‡æ–°è¾“å…¥ã€‚

è¿™é‡Œå†è¯´è¯´å…¶å®ƒå¡«å†™é¡¹çš„ä½œç”¨ï¼š

```
package name: (npm-test)    -> åç§°(å¯è·³è¿‡)
version: (1.0.0)            -> ç‰ˆæœ¬(å¯è·³è¿‡)
description:                -> æè¿°(å¯è·³è¿‡)
entry point: (index.js)     -> å…¥å£(å¯è·³è¿‡)
test command:               -> å‘½ä»¤è¡Œ(å¯è·³è¿‡)
git repository:             -> git ä»“åº“(å¯è·³è¿‡)
keywords:                   -> å…³é”®å­—(å¯è·³è¿‡)
author:                     -> ä½œè€…(å¯è·³è¿‡)
license: (ISC)              -> è®¸å¯è¯(å¯è·³è¿‡)
```

å½“æ‰€æœ‰é…ç½®é¡¹éƒ½è¾“å…¥å®ŒæˆåæŒ‰ç…§è¦æ±‚è¾“å…¥å‘½ä»¤ `yes` å³å¯å®Œæˆé…ç½®ï¼Œå¹¶åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª `pakage.json` æ–‡ä»¶äº†ã€‚æ—¢ç„¶ç”Ÿæˆçš„æ˜¯ä¸€ä¸ª `json` æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥éšæ—¶å»æ‰‹åŠ¨ä¿®æ”¹æˆ‘ä»¬ç”Ÿæˆçš„è¿™ä¸ªæ–‡ä»¶äº†ï¼Œä»¥åä¹Ÿæœ‰å¾ˆå¤šé…ç½®å±æ€§æ˜¯åœ¨å…¶å®ƒç¨‹åºåŒ…çš„å‘½ä»¤ä½¿ç”¨çš„æ—¶å€™å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆçš„ã€‚

å®é™…ä¸Šï¼Œå¦‚æœä½ ä¸å–œæ¬¢è¿™æ ·ç¹ççš„é—®ç­”ç”Ÿæˆæ–¹å¼å¯ä»¥ä½¿ç”¨æ›´å¿«é€Ÿçš„ç”Ÿæˆæ–¹å¼ï¼š

```shell
$ npm init -y
```

**â“ä¸ºä»€ä¹ˆä½¿ç”¨ package.json æ–‡ä»¶**

package.json æ˜¯ Node.js é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†é¡¹ç›®ä¾èµ–ã€‚å®ƒè§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š

1. **ä¾èµ–å…±äº«**ï¼šå›¢é˜Ÿæˆå‘˜åªéœ€æ‰§è¡Œ `npm install` å³å¯è‡ªåŠ¨å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆ`dependencies` + `devDependencies`ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨é€ä¸ªå®‰è£…
2. **ç¯å¢ƒéš”ç¦»**ï¼šé€šè¿‡ `--production` å‚æ•°å¯ä»…å®‰è£…è¿è¡Œæ—¶ä¾èµ–ï¼ˆ`npm install --production`ï¼‰ï¼Œé¿å…éƒ¨ç½²æ— å…³çš„å¼€å‘ä¾èµ–
3. **ç‰ˆæœ¬æ§åˆ¶**ï¼šç²¾ç¡®è®°å½•æ¯ä¸ªä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ä¸åŒç¯å¢ƒä¸‹çš„ä¾èµ–ä¸€è‡´æ€§
4. **é¡¹ç›®ç§»æ¤**ï¼šåªéœ€åˆ†äº« package.jsonï¼Œå³å¯åœ¨æ–°é¡¹ç›®ä¸­å¿«é€Ÿè¿˜åŸå®Œæ•´çš„ä¾èµ–ç¯å¢ƒ

> ç¤ºä¾‹ï¼šä¸€ä¸ªåŒ…å« 50+ ä¾èµ–çš„é¡¹ç›®ï¼Œè¿ç§»æ—¶åªéœ€å¤åˆ¶ package.json å¹¶è¿è¡Œ `npm install` å³å¯å®Œæˆç¯å¢ƒæ­å»ºã€‚

## ä½¿ç”¨

### å®‰è£…ç¨‹åºåŒ…

npm å®‰è£… Node.js æ¨¡å—è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š

```shell
$ npm install [-g|--global] [-S|--save][-D|--save-dev] <name>[@version] 
```

**è¯­æ³•è§£è¯»ï¼š**

1. **\<name>@version**ï¼šæ’ä»¶åç§°@ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ï¼š`npm i -S jquery@1.9.2`

2. **-g**ï¼š--global å…¨å±€å®‰è£…

3. **-S**ï¼š--save å®‰è£…ç”Ÿäº§ç¯å¢ƒéœ€è¦çš„ä¾èµ–åŒ…ï¼Œä¼šæŠŠä¾èµ–åŒ…åç§°æ·»åŠ åˆ° `package.json` æ–‡ä»¶ `dependencies` ä¸‹

4. **-D**ï¼š--save-dev å®‰è£…å¼€å‘ç¯å¢ƒéœ€è¦çš„ä¾èµ–åŒ…ï¼Œä¼šæŠŠä¾èµ–åŒ…åç§°æ·»åŠ åˆ° `package.json` æ–‡ä»¶ `devDependencies` ä¸‹

> **æç¤ºï¼š**
>
> - ç›´æ¥ä½¿ç”¨ `npm install` æ—¶ï¼Œä¼šä¸‹è½½ `dependencies` å’Œ `devDependencies` ä¸­çš„æ¨¡å—ã€‚
> - å½“ä½¿ç”¨ `npm install â€“production` æˆ–è€…æ³¨æ˜ `NODE_ENV`  å˜é‡å€¼ä¸º `production`  æ—¶ï¼Œåªä¼šä¸‹è½½ `dependencies` ä¸­çš„æ¨¡å—ã€‚

### æŸ¥çœ‹ç¨‹åºåŒ…

å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤åˆ—å‡ºæ‰€æœ‰æˆ‘ä»¬å®‰è£…çš„ åŒ…ã€‚

```shell
$ npm list [-g] [--depth=0]
```

> æç¤ºï¼š`--depth=0` ï¼šç®€åŒ–è¾“å‡º

### å¸è½½ç¨‹åºåŒ…

è¦å¸è½½é€šè¿‡npmå®‰è£…çš„ç¨‹åºåŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```shell
$ npm uninstall [-g][-S][-D] <åŒ…å>
```

> æ³¨æ„ï¼š
>
> 1. å¦‚æœå®‰è£…æ—¶ä½¿ç”¨äº† `-g` ï¼ˆå…¨å±€ï¼‰ï¼Œå¸è½½ç¨‹æ—¶ä¹Ÿåº”è¯¥åŠ ä¸Š`-g`ã€‚
> 2. å¦‚æœå®‰è£…æ—¶ä½¿ç”¨äº† `-D`ï¼ˆåœ¨å¼€å‘ç¯å¢ƒä¸­ä¾èµ–ç¨‹åºåŒ…ï¼‰ï¼Œå¸è½½æ—¶ä¹Ÿåº”è¯¥åŠ ä¸Š`-D`ã€‚
> 3. å¦‚æœå®‰è£…æ—¶ä½¿ç”¨äº† `-S` ï¼ˆåœ¨ç”Ÿäº§çº¿ä¸Šç¯å¢ƒä¾èµ–ç¨‹åºåŒ…ï¼‰ï¼Œå¸è½½æ—¶ä¹Ÿåº”è¯¥åŠ ä¸Š `-S`ã€‚

### æ›´æ–°ç¨‹åºåŒ…

éœ€è¦çŸ¥é“å“ªäº›ç¨‹åºåŒ…éœ€è¦æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤

```shell
$ npm outdated [-g] --depth=0
```

æ¥ç€å¯¹éœ€è¦æ›´æ–°çš„ç¨‹åºåŒ…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

```shell
$ npm update [-g] <åŒ…å>
```

ä½†å®é™…ä¸Šæœ€å¥½çš„æ›´æ–°å°±æ˜¯é‡è£…ï¼š

```shell
$ npm i [-g] <åŒ…å>
```

### æœç´¢ç¨‹åºåŒ…

```shell
$ npm search <name>
```

### ç®¡ç†ç¼“å­˜

å½“ npm å®‰è£…ä¸€ä¸ªåŒ…çš„æ—¶å€™å®ƒä¼šç»´æŠ¤ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸‹æ¬¡ä½ æƒ³å†æ¬¡å®‰è£…é‚£ä¸ªåŒ…çš„æ—¶å€™ï¼Œå°±ä¸ç”¨å†å»è®¿é—®ç½‘ç»œé‡æ–°ä¸‹è½½äº†ã€‚é‚£äº›å‰¯æœ¬ä¼šåœ¨ `home` ç›®å½• `.npm` æ–‡ä»¶å¤¹ä¸­ç¼“å­˜èµ·æ¥ã€‚

```shell
$ ls ~/.npm
_cacache			_logs
_locks				anonymous-cli-metrics.json
```

éšç€æ—¶é—´æ¨ç§»ï¼Œè¿™ä¸ªç›®å½•é‡Œä¼šæœ‰å¾ˆå¤šè€çš„åŒ…ï¼Œååˆ†çš„æ··ä¹±ï¼Œæ‰€ä»¥æ—¶å¸¸æ¸…ç†ä¸‹æ˜¯ååˆ†æœ‰å¿…è¦çš„ã€‚

```shell
$ npm cache clean --force
```

## ä½¿ç”¨é˜¿é‡Œé•œåƒ

ç”±äº npm å®˜æ–¹æºï¼ˆ*https://registry.npmjs.org*ï¼‰ä½äºå›½å¤–ï¼Œå›½å†…å¼€å‘è€…å¸¸é‡åˆ°ï¼š

- ä¸‹è½½é€Ÿåº¦ç¼“æ…¢ï¼ˆå‡ åKB/sï¼‰
- é¢‘ç¹å‡ºç°ä¸‹è½½ä¸­æ–­
- å®‰è£…ä¾èµ–æ—¶å¡æ­»ï¼ˆå¯é€šè¿‡ `Ctrl + C` ç»ˆæ­¢ï¼‰

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ·˜å®å›¢é˜Ÿç»´æŠ¤çš„å›½å†…é•œåƒæºï¼ˆ*https://registry.npmmirror.com*ï¼‰ï¼š

- æ¯10åˆ†é’Ÿä¸npmå®˜æ–¹æºåŒæ­¥ä¸€æ¬¡
- å›½å†…ä¸‹è½½é€Ÿåº¦æå‡10å€ä»¥ä¸Š
- æ”¯æŒæ‰€æœ‰npmå‘½ä»¤

> **å®‰è£…æ–¹æ¡ˆ1ï¼š**

```shell
# æ°¸ä¹…åˆ‡æ¢é•œåƒæº
$ npm config set registry http://registry.npmmirror.com

# è¿˜åŸå®˜æ–¹æºï¼ˆå¦‚éœ€ï¼‰
$ npm config set registry https://registry.npmjs.org
```

> **å®‰è£…æ–¹æ³•2ï¼š**

```shell
# å®‰è£…cnpmå®¢æˆ·ç«¯
$ npm install -g cnpm --registry=http://registry.npmmirror.com

# ä½¿ç”¨ç¤ºä¾‹
$ cnpm install [åŒ…å]  # ç­‰ä»·äº npm install
$ cnpm install -g @vue/cli
```

## å¸¸ç”¨æŒ‡ä»¤

| æŒ‡ä»¤                 | æè¿°                             |
| -------------------- | -------------------------------- |
| `npm -v`             | æŸ¥çœ‹npmç‰ˆæœ¬                      |
| `which|where npm`    | æŸ¥çœ‹npmå®‰è£…è·¯å¾„                  |
| `npm help`           | æŸ¥çœ‹npmå¸®åŠ©                      |
| `npm list --depth=0` | æŸ¥çœ‹npmå·²å®‰è£…çš„åŒ…                |
| `npm root -g`        | æŸ¥çœ‹å…¨å±€å®‰è£…ç›®å½•                 |
| `npm config ls`      | æŸ¥çœ‹é…ç½®é¡¹                       |
| `npm install `       | å®‰è£…åŒ… *                         |
| `npm uninstall`      | å¸è½½åŒ…                           |
| `npm init -y`        | åˆ›å»ºé…ç½®æ–‡ä»¶ *                   |
| `npm update`         | æ›´æ–°é¡¹ç›®çš„ä¾èµ–åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬       |
| `npm outdated`       | æ£€æŸ¥é¡¹ç›®çš„ä¾èµ–åŒ…æ˜¯å¦æœ‰æ›´æ–°çš„ç‰ˆæœ¬ |

## npm ä½¿ç”¨æµç¨‹

åœ¨é¡¹ç›®ä¸­æ‰“å¼€ç»ˆç«¯é€šè¿‡ `npm init -y` åˆ›å»º `package.json` æ–‡ä»¶ï¼Œç„¶åå®‰è£…å¯¹åº”ä¾èµ–å³å¯ã€‚

## å‘å¸ƒ npm åŒ…

1. æ³¨å†Œè´¦å·ï¼Œæä¾›ä¸¤ç§æ³¨å†Œæ–¹å¼ï¼š

   - ç›´æ¥æ³¨å†Œï¼š<https://www.npmjs.com/signup>
   - æœ¬åœ°æ³¨å†Œï¼šç»ˆç«¯è¾“å…¥æŒ‡ä»¤ `npm adduser` ï¼Œä¾æ¬¡è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ï¼Œé‚®ç®±å³å¯ï¼Œæ³¨å†ŒæˆåŠŸä¼šè‡ªåŠ¨ç™»å½•ã€‚

2. ç™»é™†è®¤è¯

   ```shell
   $ npm login
   ```

   > æ³¨æ„ï¼šå¦‚æœä½ è®¾ç½®äº†æ·˜å®é•œåƒï¼Œå°†ä¼šç™»é™†å¤±è´¥ï¼Œéœ€ä½¿ç”¨å®˜æ–¹æºæ‰èƒ½æˆåŠŸç™»å½•

   ```shell
   # ä¸´æ—¶åˆ‡æ¢å›å®˜æ–¹æº
   $ npm config set registry https://registry.npmjs.org/
   
   # ç™»å½•åå¯åˆ‡æ¢å›æ·˜å®æºï¼ˆå¯é€‰ï¼‰
   $ npm config set registry https://registry.npmmirror.com
   ```

3. å‘å¸ƒåŒ…

   ```shell
   # å‘å¸ƒå½“å‰åŒ…ï¼ˆç¡®ä¿package.jsonå·²é…ç½®å¥½ï¼‰
   $ npm publish
   
   # å‘å¸ƒåˆ°æŒ‡å®štagï¼ˆå¦‚betaç‰ˆï¼‰
   $ npm publish --tag beta
   ```

   å‘å¸ƒæˆåŠŸåå¯åœ¨ [npmå®˜ç½‘](https://www.npmjs.com/) æœç´¢æ‚¨çš„åŒ…

4. ç‰ˆæœ¬ç®¡ç†

   æ¯æ¬¡æ›´æ–°å¿…é¡»ä¿®æ”¹ç‰ˆæœ¬å·ï¼ˆéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼‰ï¼š

   ```shell
   # è‡ªåŠ¨å‡çº§ç‰ˆæœ¬å·ï¼ˆä¸‰é€‰ä¸€ï¼‰
   npm version patch  # è¡¥ä¸ç‰ˆæœ¬ 1.0.x
   npm version minor  # æ¬¡ç‰ˆæœ¬ 1.x.0 
   npm version major  # ä¸»ç‰ˆæœ¬ x.0.0
   
   # ç„¶åé‡æ–°å‘å¸ƒ
   npm publish
   ```

5. åŒ…ç»´æŠ¤

   ```shell
   # æ’¤é”€å‘å¸ƒï¼ˆ72å°æ—¶å†…æœ‰æ•ˆï¼‰
   npm unpublish <åŒ…å>@<ç‰ˆæœ¬å·>
   
   # åºŸå¼ƒæŸä¸ªç‰ˆæœ¬ï¼ˆæ¨èæ›¿ä»£unpublishï¼‰
   npm deprecate <åŒ…å>@<ç‰ˆæœ¬å·> "è¯´æ˜æ–‡å­—"
   ```

æœ€ä½³å®è·µå»ºè®®ï¼š

1. å‘å¸ƒå‰åŠ¡å¿…æµ‹è¯•åŒ…åŠŸèƒ½
2. ä½¿ç”¨`.npmignore`æ–‡ä»¶æ’é™¤éå¿…è¦æ–‡ä»¶
3. é‡è¦åŒ…å»ºè®®æ·»åŠ CI/CDè‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
4. ç§æœ‰åŒ…è€ƒè™‘ä½¿ç”¨`npm private`æˆ–ä¼ä¸šç§æœ‰ä»“åº“

> **æ³¨æ„**ï¼šé¢‘ç¹unpublishå¯èƒ½å¯¼è‡´è´¦å·è¢«å°ç¦ï¼Œå»ºè®®ä½¿ç”¨deprecateæ›¿ä»£

## ç®€åŒ–ä»»åŠ¡

å½“æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚ç¼–è¯‘ es6ï¼Œä¼šè¾“å…¥ä¸€é•¿ä¸²çš„æŒ‡ä»¤ï¼š

```shell
$ ./node_modules/.bin/babel src --out-dir lib
```

é€šè¿‡ package.json é…ç½®æ–‡ä»¶æˆ‘ä»¬å¯ä»¥ç®€åŒ–æ“ä½œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
"scripts": {
	"build": "./node_modules/.bin/babel src --out-dir lib"
}
```

è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å³å¯ï¼š

```shell
$ npm run build
```

## å¸¸è§ npm é—®é¢˜è§£å†³æ–¹æ¡ˆ

### 1. npm å‘½ä»¤æ— å“åº”

**é—®é¢˜ç°è±¡**ï¼šæ‰§è¡Œ `npm` å‘½ä»¤åç»ˆç«¯å¡æ­»æ— è¾“å‡º

**è§£å†³æ–¹æ¡ˆ**ï¼š

```shell
# åˆ é™¤ç”¨æˆ·çº§é…ç½®ï¼ˆWindows/Mac/Linuxé€šç”¨ï¼‰
$ rm ~/.npmrc

# æˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„åˆ é™¤ï¼ˆWindowsç¤ºä¾‹ï¼‰
$ del C:\Users\ä½ çš„ç”¨æˆ·å\.npmrc
```

### 2. å®‰è£…ä¾èµ–å¤±è´¥

**å…¸å‹é”™è¯¯**ï¼š`ECONNRESET` æˆ– `ETIMEDOUT`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```shell
# æ–¹æ¡ˆ1ï¼šåˆ‡æ¢æ·˜å®é•œåƒæº
$ npm config set registry https://registry.npmmirror.com

# æ–¹æ¡ˆ2ï¼šæ¸…é™¤ç¼“å­˜åé‡è¯•
$ npm cache clean --force
$ npm install
```

### 3. æƒé™ä¸è¶³é—®é¢˜

**é”™è¯¯æç¤º**ï¼š`EACCES` æˆ– `EPERM`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```shell
# æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç®¡ç†å‘˜æƒé™
$ sudo npm install -g åŒ…å  # Linux/Mac
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦  # Windows

# æ–¹æ¡ˆ2ï¼šä¿®æ”¹npmé»˜è®¤ç›®å½•æƒé™
$ npm config set prefix ~/.npm-global
```

### 4. ç‰ˆæœ¬å†²çªå¤„ç†

**é”å®šä¾èµ–ç‰ˆæœ¬**ï¼š

```shell
# æŸ¥çœ‹å†²çªä¾èµ–
$ npm ls åŒ…å

# å¼ºåˆ¶ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬
$ npm install åŒ…å@ç‰ˆæœ¬å· --save-exact
```

> **é‡è¦æç¤º**ï¼šé‡åˆ°é—®é¢˜æ—¶å»ºè®®å…ˆæ‰§è¡Œ `npm -v` ç¡®è®¤npmæœ¬èº«å¯æ­£å¸¸è¿è¡Œï¼Œå†æ ¹æ®å…·ä½“é”™è¯¯ä¿¡æ¯æ’æŸ¥ã€‚

## NPX

### æ ¸å¿ƒç‰¹æ€§

NPX æ˜¯ npm 5.2+ ç‰ˆæœ¬å†…ç½®çš„åŒ…æ‰§è¡Œå·¥å…·ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- **ä¸´æ—¶å®‰è£…**ï¼šè‡ªåŠ¨ä¸‹è½½å¹¶æ‰§è¡Œå…¨å±€å‘½ä»¤ï¼Œæ‰§è¡Œåç«‹å³æ¸…é™¤
- **é¿å…æ±¡æŸ“**ï¼šä¸æ°¸ä¹…å ç”¨ç£ç›˜ç©ºé—´ï¼ˆé»˜è®¤å­˜æ”¾äºç¼“å­˜ç›®å½•ï¼‰
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ”¯æŒæŒ‡å®šç‰¹å®šç‰ˆæœ¬åŒ…æ‰§è¡Œ

### ä½¿ç”¨åœºæ™¯

```shell
# 1. ä¸´æ—¶åˆ›å»ºReacté¡¹ç›®ï¼ˆä¸å…¨å±€å®‰è£…create-react-appï¼‰
$ npx create-react-app my-app

# 2. æ‰§è¡Œç‰¹å®šç‰ˆæœ¬å·¥å…·
$ npx webpack@4.44.1 --version

# 3. è¿è¡Œæœ¬åœ°node_modulesä¸­çš„å‘½ä»¤
$ npx eslint .
```

### å®‰è£…è¯´æ˜

```shell
# Node 8.2+/npm 5.2+ å·²å†…ç½®
# æ—§ç‰ˆæœ¬éœ€æ‰‹åŠ¨å®‰è£…ï¼š
$ npm install -g npx
```

### å·¥ä½œåŸç†

1. ä¼˜å…ˆæŸ¥æ‰¾æœ¬åœ°`node_modules/.bin`ç›®å½•
2. æœªæ‰¾åˆ°æ—¶æ£€æŸ¥å…¨å±€å®‰è£…çš„åŒ…
3. ä»æœªæ‰¾åˆ°åˆ™ä¸´æ—¶ä¸‹è½½æ‰§è¡Œï¼ˆé»˜è®¤ç¼“å­˜24å°æ—¶ï¼‰

### é«˜çº§ç”¨æ³•

```shell
# å¼ºåˆ¶ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼ˆè·³è¿‡ç¼“å­˜æ£€æŸ¥ï¼‰
$ npx --ignore-existing prettier --write .

# æŒ‡å®šåŒ…è¿è¡Œç¯å¢ƒ
$ npx --node-arg=--inspect vite
```

> **æœ€ä½³å®è·µ**ï¼šæ¨èç”¨äºè„šæ‰‹æ¶å·¥å…·ï¼ˆå¦‚create-react-appï¼‰å’Œéœ€è¦éš”ç¦»ç¯å¢ƒçš„åœºæ™¯ï¼Œé¿å…å…¨å±€å®‰è£…å¸¦æ¥çš„ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚

# [Yarn](https://www.yarnpkg.cn/)

## æ¦‚è¿°

npm ä½œä¸º Node.js çš„å®˜æ–¹åŒ…ç®¡ç†å™¨ï¼Œç¡®å®ä¸ºå‰ç«¯å·¥ç¨‹åŒ–å¥ å®šäº†é‡è¦åŸºç¡€ã€‚ä½†éšç€å‰ç«¯ç”Ÿæ€çš„å¿«é€Ÿå‘å±•ï¼Œå…¶å­˜åœ¨çš„æ€§èƒ½ç“¶é¢ˆå’Œä¾èµ–ç®¡ç†é—®é¢˜é€æ¸æ˜¾ç°ã€‚Facebook å›¢é˜ŸåŸºäºå®é™…å·¥ç¨‹ç—›ç‚¹ï¼Œäº 2016 å¹´æ¨å‡º yarn è§£å†³æ–¹æ¡ˆã€‚

yarn æ ¸å¿ƒä¼˜åŠ¿ï¼š

1. æ€§èƒ½ä¼˜åŒ–
   - **ä¾èµ–ç¼“å­˜æœºåˆ¶**ï¼šé‡‡ç”¨å…¨å±€ç¼“å­˜ç›®å½•ï¼ˆ`~/.yarn/cache`ï¼‰ï¼Œç›¸åŒä¾èµ–ç‰ˆæœ¬ä»…ä¸‹è½½ä¸€æ¬¡
   - **å¹¶è¡Œä¸‹è½½**ï¼šçªç ´ npm ä¸²è¡Œä¸‹è½½é™åˆ¶ï¼Œå……åˆ†åˆ©ç”¨ç½‘ç»œå¸¦å®½
   - **ç¦»çº¿æ¨¡å¼**ï¼šæ”¯æŒ `--offline` å‚æ•°å®Œå…¨ç¦»çº¿å®‰è£…ï¼ˆä¾èµ–ç¼“å­˜å‘½ä¸­æ—¶ï¼‰
2. å®‰å…¨å¢å¼º
   - **å®Œæ•´æ€§æ ¡éªŒ**ï¼šé€šè¿‡ SHA-512 å“ˆå¸Œæ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…
   - **è®¸å¯æ£€æŸ¥**ï¼š`yarn licenses` å‘½ä»¤å¯å®¡æŸ¥ä¾èµ–è®¸å¯åè®®
   - **å·¥ä½œåŒºéš”ç¦»**ï¼šé€šè¿‡ workspace å®ç°å¤šé¡¹ç›®ä¾èµ–éš”ç¦»
3. å¯é æ€§ä¿éšœ
   - **ç¡®å®šæ€§å®‰è£…**ï¼šyarn.lock æ–‡ä»¶ç²¾ç¡®é”å®šä¾èµ–æ ‘ç»“æ„
   - **å¤šæ³¨å†Œæºæ”¯æŒ**ï¼šå¯é…ç½®ä¸åŒ scope ä½¿ç”¨ä¸åŒ registry
   - **å®‰è£…é‡è¯•æœºåˆ¶**ï¼šè‡ªåŠ¨å¤„ç†ç½‘ç»œæ³¢åŠ¨å¯¼è‡´çš„å®‰è£…ä¸­æ–­

## å®‰è£…

æ¨èä½¿ç”¨ npm å®‰è£…ï¼š

```shell
# å…¨å±€å®‰è£…æœ€æ–°ç¨³å®šç‰ˆ
$ npm install -g yarn

# éªŒè¯å®‰è£…
$ yarn --version
```

## é…ç½®

```shell
# è®¾ç½®æ·˜å®é•œåƒåŠ é€Ÿ
$ yarn config set registry https://registry.npmmirror.com

# ä¿®æ”¹ç¼“å­˜ç›®å½•ï¼ˆå¯é€‰ï¼‰
$ yarn config set cache-folder ~/.yarn-cache
```

## å¸¸ç”¨æŒ‡ä»¤

| æŒ‡ä»¤                    | æè¿°                                                         |
| ----------------------- | ------------------------------------------------------------ |
| `yarn init`             | åœ¨é¡¹ç›®ç›®å½•ä¸­åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ package.json æ–‡ä»¶ï¼Œç”¨äºç®¡ç†é¡¹ç›®çš„ä¾èµ–å’Œé…ç½®ã€‚ |
| `yarn install` / `yarn` | å®‰è£…é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…ã€‚<br />å¦‚æœåœ¨æŒ‡ä»¤åé¢æŒ‡å®šäº†åŒ…åï¼Œåˆ™åªå®‰è£…æŒ‡å®šçš„åŒ…ã€‚<br />é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šæ ¹æ® package.json æ–‡ä»¶ä¸­çš„ä¾èµ–é…ç½®å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…ã€‚ |
| `yarn add`              | å®‰è£…æŒ‡å®šçš„ä¾èµ–åŒ…ã€‚ä¾‹å¦‚ï¼š`yarn add package-name`              |
| `yarn remove`           | å¸è½½æŒ‡å®šçš„ä¾èµ–åŒ…ã€‚ä¾‹å¦‚ï¼š`yarn remove package-name`ã€‚         |
| `yarn upgrade`          | æ›´æ–°é¡¹ç›®çš„ä¾èµ–åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚                                 |
| `yarn outdated`         | æ£€æŸ¥é¡¹ç›®çš„ä¾èµ–åŒ…æ˜¯å¦æœ‰æ›´æ–°çš„ç‰ˆæœ¬ã€‚                           |
| `yarn list [--depth=0]` | åˆ—å‡ºå½“å‰é¡¹ç›®å®‰è£…çš„æ‰€æœ‰ä¾èµ–åŒ…ã€‚                               |
| `yarn run`              | å¸è½½åŒ…                                                       |
| `yarn cache clean`      | è¿è¡Œåœ¨ package.json æ–‡ä»¶ä¸­å®šä¹‰çš„è„šæœ¬å‘½ä»¤ã€‚                   |
| `yarn publish`          | å‘å¸ƒè‡ªå·±å¼€å‘çš„åŒ…åˆ° npm çš„ä»“åº“ï¼Œä¾›å…¶ä»–äººä½¿ç”¨ã€‚                |

æ›´å¤šæŒ‡ä»¤ï¼Œå‚è€ƒï¼šhttps://www.yarnpkg.cn/cli/install

# [pnpm](https://pnpm.io/zh/)ï¼ˆæ¨èï¼‰

## æ¦‚è¿°

pnpm æ˜¯æ–°ä¸€ä»£ JavaScript åŒ…ç®¡ç†å·¥å…·ï¼Œç›¸æ¯” npm/yarn å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š

1. **æé€Ÿå®‰è£…**ï¼šé€šè¿‡æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œå®‰è£…é€Ÿåº¦æ¯”ä¼ ç»Ÿå·¥å…·å¿« 2-3 å€
2. **èŠ‚çœç©ºé—´**ï¼šä½¿ç”¨ç¡¬é“¾æ¥æŠ€æœ¯ï¼Œç›¸åŒä¾èµ–åªå­˜å‚¨ä¸€ä»½ï¼ŒèŠ‚çœ 40%-70% ç£ç›˜ç©ºé—´
3. **ç½‘ç»œä¼˜åŒ–**ï¼šå‡å°‘é‡å¤ä¸‹è½½ï¼Œæ˜¾è‘—é™ä½å¸¦å®½æ¶ˆè€—
4. **ä¾èµ–å®‰å…¨**ï¼šå½»åº•è§£å†³å¹½çµä¾èµ–é—®é¢˜ï¼Œä¿è¯ä¾èµ–æ ‘çš„å‡†ç¡®æ€§

> æ¨èé˜…è¯»ï¼š[pnpm æ˜¯å‡­ä»€ä¹ˆå¯¹ npm å’Œ yarn é™ç»´æ‰“å‡»çš„](https://juejin.cn/post/7127295203177676837)

## å®‰è£…

æ¨èä½¿ç”¨ npm å®‰è£…ï¼š

```shell
$ npm install -g pnpm
```

## é…ç½®æ–‡ä»¶

1. [package.json](https://pnpm.io/zh/package_json)
2. [pnpm-workspace.yaml](https://pnpm.io/zh/pnpm-workspace_yaml)

## å¸¸ç”¨æŒ‡ä»¤

å‚è€ƒ [è¿™é‡Œ >>](https://pnpm.io/zh/cli/add)

# å¼‚å¸¸å¤„ç†

### Windows ç¯å¢ƒå˜é‡é…ç½®

å½“å‡ºç° `npm ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤` é”™è¯¯æ—¶ï¼š

1. **æŸ¥æ‰¾å®‰è£…è·¯å¾„**ï¼š

   - Node.js é»˜è®¤å®‰è£…è·¯å¾„ï¼š`C:\Program Files\nodejs\`
   - æˆ–é€šè¿‡ `where node` å‘½ä»¤æŸ¥æ‰¾

2. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š

   ```powershell
   # PowerShell å¿«é€Ÿè®¾ç½®ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰
   [Environment]::SetEnvironmentVariable("PATH", "$env:PATH;C:\Program Files\nodejs\", "Machine")
   ```

3. **éªŒè¯é…ç½®**ï¼š

   ```cmd
   $ echo %PATH%
   $ npm -v
   ```

### JSON è§£æå¼‚å¸¸å¤„ç†

å½“å‡ºç° JSON è§£æé”™è¯¯æ—¶ï¼Œå¦‚ï¼š*Unexpected end of JSON input while parsing near*

è§£å†³æ–¹æ¡ˆï¼Œæ¸…é™¤ç¼“å­˜ï¼š

```shell
# æ¸…é™¤ç¼“å­˜å¹¶é‡è¯•
$ npm cache clean --force
$ rmdir /s /q %AppData%\npm-cache  # Windows
$ rm -rf ~/.npm/_cacache           # macOS/Linux

# é‡ç½®ç½‘ç»œé…ç½®
npm config set registry https://registry.npmmirror.com
```

**é¢„é˜²æªæ–½**ï¼š

1. å®šæœŸæ‰§è¡Œ `npm cache verify`
2. é¿å…ä½¿ç”¨ä¸ç¨³å®šç½‘ç»œç¯å¢ƒ
3. é‡è¦é¡¹ç›®ä½¿ç”¨ `--prefer-offline` å‚æ•°
